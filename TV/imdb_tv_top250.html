<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>自定义排行榜</title>
<script type="text/javascript" src="js/jquery-min-1.7.js"></script>
</head>
<body>
  <center>
<script type="text/javascript">
   $().ready(function(){
     $.getJSON('modules/douban/imdb250.json',function(data){
		   var fields=data.general.fields;
		   var caption=data.general.caption;
		   var table_id=data.general.id;
		   var table_class=data.general.class;
		   var table_tr=data.data;
		   
		   $("#rank_div").append('<table id="'+table_id+'" class="'+table_class+'"><caption>'+caption+'</caption><tr id="th"></tr><tbody id="tbody"></tbody></table>');
		   for(j=0;j<=fields.length-1;j++){
			   $("#th").append('<th>'+fields[j]+'</th>');
		   }
		  
		   for(k=0;k<=table_tr.length-1;k++){
			   var each_tr='';
			   for(m=0;m<=table_tr[k].length-1;m++){
				   each_tr=each_tr+'<td>'+table_tr[k][m]+'</td>'
			   }
			   $("#tbody").append('<tr>'+each_tr+'</tr>');
		   }
	   });
   });
</script>
  <div id="rank_div"></div>
  </center>
  
<style type="text/css">
  td{border-bottom:1px solid black!important;padding:8px 10px;font-size:13px;}
  th{color:black;font-size:13px;}
  a.movie_title,td{color:black!important;}
  tr:hover{background-color:#F8E282;}
  table caption{font-size:16px;color:black;font-weight:bold;}
  table{border-collapse: collapse;margin-bottom:5px;}
  .table_remark{color:black;}
  .title_tip{font-size:12px;}
  .imdb{padding:2px 1px;}
  .search{color:green;}
  th{padding:2px 5px;}
  #remove_tvs{font-size:12px;}
</style>
<script type="text/javascript">
  $().ready(function(){
	$("a.douban_href").parent().css('text-align','center').andSelf().attr({title:'从豆瓣打开',target:"_blank"});
	$("a.movie_title").attr({target:"_blank"});
	$("table tr:even").css('background-color','#E1E4E8');
	$("td.imdb_top250-dbym,td.imdb_top250-imdbym").each(function(){
		var page=$(this).attr('class').split("-").pop();
		if(page=='dbym'){t='从豆瓣打开';}else{t='从IMDB打开';}
		$(this).find('a').attr({title:t,target:"_blank"});
	});
	$('td.imdb_top250-dbpf').each(function(){
      var douban_rate=parseFloat($(this).html());
      var imdb_rate=parseFloat($(this).prev().prev().prev().prev().html());
      if(douban_rate>imdb_rate){
		direction='up.png';
      }else if(douban_rate<imdb_rate){
		direction='down.png';
      } else {
		direction='right.png';
      }
      $(this).css('background','url(images/'+direction+') no-repeat 65% 9px');
	});
	$('td.imdb_top250-yk').each(function(){
		var word=$(this).parent().find('td.imdb_top250-mc').html();
		$(this).html('<a class="search" target="_blank" title="搜索此部电影" href="http://www.baidu.com/baidu?wd='+word+'">搜索</a>');
    });
  });
</script>
</body>
</html>
